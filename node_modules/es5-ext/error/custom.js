"use strict";

var assign            = require("../object/assign")
  , isObject          = require("../object/is-object")
  , isValue           = require("../object/is-value")
  , captureStackTrace = Error.captureStackTrace;

<<<<<<< HEAD
module.exports = function (message/*, code, ext*/) {
=======
exports = module.exports = function (message/*, code, ext*/) {
>>>>>>> a0d14a2497264e6566ee5a25b965f3a4adaa178d
	var err = new Error(message), code = arguments[1], ext = arguments[2];
	if (!isValue(ext)) {
		if (isObject(code)) {
			ext = code;
			code = null;
		}
	}
	if (isValue(ext)) assign(err, ext);
	if (isValue(code)) err.code = code;
<<<<<<< HEAD
	if (captureStackTrace) captureStackTrace(err, module.exports);
=======
	if (captureStackTrace) captureStackTrace(err, exports);
>>>>>>> a0d14a2497264e6566ee5a25b965f3a4adaa178d
	return err;
};
